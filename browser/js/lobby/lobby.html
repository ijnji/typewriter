<section id="lobby">
  <div>
    <h4 class="title">Users Online</h4>
    <div class="searchbar rounded">
    <input type="text" class="btn-extended" placeholder="   search for user" ng-model="search" class="searchbar rounded" style="border-radius: 25px; background-color: #ffffff;" />

    </div>

    <ul>
         <li ng-repeat="lobbyUser in lobbyUsers | filter: {username: '!' + $root.rootScopeUser.username} |filter: {username: search}"" class="left-align">
            <img src="{{lobbyUser.avatar}}" >
            <a class="modal-trigger" href="#modal{{$index+1}}" repeat-done="initModals()">{{lobbyUser.username}} </a>
           <div id="modal{{$index+1}}" class="modal">
            <div class="modal-content">
                <p>Would you like to challenge {{lobbyUser.username}}?</p>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">No</a>
                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" ng-click="challengeUser(lobbyUser)">Yes</a>
            </div>
            </div>
        </li>
  </ul>

  <div id="challengeUser" class="modal">
    <div class="modal-content">
      <p>{{challenger.username}} wants to challenge you! Do you want to play against them?</p>
    </div>
    <div class="modal-footer">
    <a ng-click="challengeRejected()" class="modal-action modal-close waves-effect waves-green btn-flat">No</a>
      <a ng-click="challengeAccepted()" class="modal-action modal-close waves-effect waves-green btn-flat">Yes</a>
    </div>
  </div>

  <div id="waitingForUser" class="modal">
    <div class="modal-content" ng-show="waiting">
    <div class="left-align close"><a class="modal-action modal-close">X</a></div>
      <p>Waiting for {{opponent.username}}'s response!</p>
    </div>
    <div class="modal-content" ng-show="!waiting">
      <p>Sorry, {{opponent.username}} has rejected your request.</p>
    </div>
    <div class="modal-footer" ng-show="!waiting">
      <a class="modal-action modal-close waves-effect waves-green btn-flat">OK</a>
    </div>
  </div>

</section>
